<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
  <link rel="stylesheet" href="style.css">
  <script defer src="auth.js"></script>
  <script defer src="orders.js"></script>
  <script defer src="create-order.js"></script>
  <script defer src="script.js"></script>


</head>
<body id="top">
    <script>
        document.addEventListener('DOMContentLoaded', () => {
          requireAuth();
          const currentUser = getCurrentUser();
        });
      </script>

  <header class="header">
    <div class="container">
      <div class="logo">
        <img src="img/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø"></a>
      </div>
      <nav class="nav dashboard-nav">
        <a href="index.html"  class="tab-link">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="#tab-calc" class="tab-link active">–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞</a>
        <a href="#tab-orders" class="tab-link">–ó–∞–∫–∞–∑—ã</a>
      </nav>
      <button class="btn-login" onclick="logout()">–í—ã–π—Ç–∏</button>
    </div>
  </header>

  <main class="container">
    <section id="tab-orders" class="tab-content">
      <h2>–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h2>
      <div class="orders-tabs">
        <button data-status="created" class="order-tab active">–ù–æ–≤—ã–µ</button>
        <button data-status="in_transit" class="order-tab">–í –ø—É—Ç–∏</button>
        <button data-status="delivered" class="order-tab">–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ</button>
        <button data-status="archived" class="order-tab">–ê—Ä—Ö–∏–≤</button>
      </div>
      <div id="orders-list"></div>
    </section>

<section id="tab-calc" class="tab-content" style="display:none">
  <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑</h2>
  <form id="order-form">
    <div class="calculator-box">
      <div class="row">
        <select id="fromSelect" required>
          <option value="">–û—Ç–∫—É–¥–∞</option>
          <option>–Ø–∫—É—Ç—Å–∫</option>
          <option>–¢–æ–∫—É–º–∞</option>
          <option>–ë–æ—Ä—É–ª–∞—Ö</option>
          <option>–ë–∞—Ç–∞–≥–∞–π</option>
          <option>–í–µ—Ä—Ö–æ—è–Ω—Å–∫</option>
          <option>–ë–æ—Ä–æ–Ω—É–∫</option>
          <option>–ê—Ä—ã–ª–∞—Ö</option>
        </select>
        <select id="toSelect" required>
          <option value="">–ö—É–¥–∞</option>
        </select>
      </div>
      <div class="button-group">
        <button type="button" class="option-button size-btn" data-size="gabarit">–ì–∞–±–∞—Ä–∏—Ç–Ω—ã–π –≥—Ä—É–∑</button>
        <button type="button" class="option-button size-btn" data-size="negabarit">–ù–µ–≥–∞–±–∞—Ä–∏—Ç–Ω—ã–π –≥—Ä—É–∑</button>
      </div>
      <div class="button-group">
        <button type="button" class="option-button section-btn" data-section="cold">–•–æ–ª–æ–¥–Ω—ã–π –æ—Ç—Å–µ–∫</button>
        <button type="button" class="option-button section-btn" data-section="warm">–¢—ë–ø–ª—ã–π –æ—Ç—Å–µ–∫</button>
      </div>
      <div class="row">
        <input type="number" id="length" placeholder="–î–ª–∏–Ω–∞, —Å–º" min="0.01" max="1000" step="0.01" required>
        <input type="number" id="width" placeholder="–®–∏—Ä–∏–Ω–∞, —Å–º" min="0.01" max="1000" step="0.01" required>
        <input type="number" id="height" placeholder="–í—ã—Å–æ—Ç–∞, —Å–º" min="0.01" max="1000" step="0.01" required>
        <input type="number" id="weight" placeholder="–í–µ—Å, –∫–≥" min="0.01" step="0.01" required>
      </div>
      <hr>
      <button type="button" id="calculate-btn" class="calculate-button">–ü–æ—Å—á–∏—Ç–∞—Ç—å</button>
      <p class="calculated-result">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <strong><span id="calculated-cost">‚Äî</span> ‚ÇΩ</strong></p>
    </div>
    <div class="order-details">
      <label>
        –û–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–∑–∞:
        <textarea id="description" rows="3" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ LG" required></textarea>
      </label>
      <label>
        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:
        <input type="number" id="quantity" min="1" value="1" required>
      </label>
      <label>
        –ò–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è:
        <input type="text" id="recipient-name" placeholder="–§–ò–û –ø–æ–ª—É—á–∞—Ç–µ–ª—è" required>
      </label>
      <label>
        –¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–ª—É—á–∞—Ç–µ–ª—è:
        <input type="tel" id="recipient-phone" placeholder="+7 (___) ___-__-__" required>
      </label>
      <label>
        –ê–¥—Ä–µ—Å (—É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤.):
        <input type="text" id="address" placeholder="–£–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞" required>
      </label>
    </div>
    <button id="create-order-btn" type="submit" class="btn-primary">–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑</button>  
  </form>
</section>
  </main>

  <footer class="footer-light">
    <div class="footer-container">
      <div class="footer-columns">
        <div class="footer-column">
          <h3>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
          <ul>
            <li>üìû –¢–µ–ª–µ—Ñ–æ–Ω—ã: +7 924 165-75-75, +7 924 165-75-22</li>
            <li>üìß Email: vvdrugin@mail.ru</li>
            <li>üìç –†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–∞—Ö–∞ (–Ø–∫—É—Ç–∏—è), –í–µ—Ä—Ö–æ—è–Ω—Å–∫–∏–π —É–ª—É—Å, —Å. –ë–æ—Ä–æ–Ω—É–∫, —É–ª. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è, –¥.9, –∫–≤.3</li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>–†–µ–∫–≤–∏–∑–∏—Ç—ã</h3>
          <ul>
            <li>–ò–ü –î—Ä—É–≥–∏–Ω –í—è—á–µ—Å–ª–∞–≤ –í—è—á–µ—Å–ª–∞–≤–æ–≤–∏—á</li>
            <li>–ò–ù–ù 14351318477</li>
            <li>–û–ì–†–ù–ò–ü 307143515500090</li>
          </ul>
        </div>
      </div>
    </div>
  </footer>

  <template id="order-card-template">
    <div class="order-card" data-id="">
      <div class="order-summary">
        <strong class="order-id">‚Ññ</strong>
        <div class="order-date"></div>
        <div><span class="order-route"></span></div>
        <div class="order-type"></div>
        <div class="order-dims">–í–µ—Å: <span class="order-weight"></span> –∫–≥, –ì–∞–±–∞—Ä–∏—Ç—ã: <span class="order-lwh"></span> —Å–º</div>
        <div>–°—Ç–æ–∏–º–æ—Å—Ç—å: <span class="order-cost"></span> ‚ÇΩ</div>
      </div>
      
      <div class="order-meta">
        <span class="order-from"></span>
        <span class="order-to"></span>
      </div>

      <div class="order-actions">
        <button class="details-btn">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
        <button class="delete-btn">–£–¥–∞–ª–∏—Ç—å</button>
        <button class="status-btn" style="display:none;">–ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
      </div>
      <div class="order-details">
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> <span class="order-desc"></span></p>
        <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</strong> <span class="order-qty"></span></p>
        <p><strong>–ü–æ–ª—É—á–∞—Ç–µ–ª—å:</strong> <span class="order-name"></span></p>
        <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> <span class="order-phone"></span></p>
        <p><strong>–ê–¥—Ä–µ—Å:</strong> <span class="order-address"></span></p>
      </div>
    </div>
  </template>

  <div id="orders-list"></div>

  <script>

    document.querySelectorAll('.tab-link').forEach(a => {
      a.addEventListener('click', e => {
        e.preventDefault();
        document.querySelectorAll('.tab-link').forEach(x => x.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(s => s.style.display = 'none');
        a.classList.add('active');
        document.querySelector(a.getAttribute('href')).style.display = 'block';
      });
    });

    function logout() {
      sessionStorage.removeItem('currentUser');
      window.location.href = 'login.html';
    }
  </script>
</body>
</html>
